{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aweso\\\\OneDrive\\\\Desktop\\\\QuickMeds\\\\frontend\\\\src\\\\components\\\\buttons\\\\DeleteButton.js\";\nimport React from 'react';\nimport { RiDeleteBin6Fill } from 'react-icons/ri';\nimport { toast } from 'react-toastify';\nimport DeleteModal from '../modals/DeleteModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteButton = _ref => {\n  let {\n    deleteApiLink,\n    itemId,\n    name,\n    onDelete\n  } = _ref;\n\n  const deleteItem = () => {\n    const token = localStorage.getItem('token'); // Retrieve token from localStorage\n\n    if (!token) {\n      console.error(\"No token found!\");\n      toast.error(\"Unauthorized: Please log in again.\");\n      return;\n    }\n\n    fetch(deleteApiLink, {\n      method: 'DELETE',\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n        // Attach token\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(`HTTP error! Status: ${res.status}`);\n      }\n\n      return res.json();\n    }).then(data => {\n      if (data.message && data.message.includes('deleted successfully')) {\n        toast( /*#__PURE__*/_jsxDEV(DeleteModal, {\n          name: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 23\n        }, this));\n\n        if (onDelete && typeof onDelete === 'function') {\n          onDelete();\n        }\n      } else if (data.deletedCount > 0) {\n        toast( /*#__PURE__*/_jsxDEV(DeleteModal, {\n          name: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 23\n        }, this));\n\n        if (onDelete && typeof onDelete === 'function') {\n          onDelete();\n        }\n      } else {\n        toast.error(`Failed to delete ${name}`);\n      }\n    }).catch(error => {\n      console.error('Delete error:', error);\n      toast.error(`Error deleting ${name}: ${error.message}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: deleteItem,\n    className: \"z-10 block p-1 text-red-700 transition-all bg-red-100 border-2 border-white rounded-full active:bg-red-50 hover:scale-110 focus:outline-none focus:ring\",\n    type: \"button\",\n    children: /*#__PURE__*/_jsxDEV(RiDeleteBin6Fill, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_c = DeleteButton;\nexport default DeleteButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"names":["React","RiDeleteBin6Fill","toast","DeleteModal","DeleteButton","deleteApiLink","itemId","name","onDelete","deleteItem","token","localStorage","getItem","console","error","fetch","method","headers","then","res","ok","Error","status","json","data","message","includes","deletedCount","catch"],"sources":["C:/Users/aweso/OneDrive/Desktop/QuickMeds/frontend/src/components/buttons/DeleteButton.js"],"sourcesContent":["import React from 'react';\r\nimport { RiDeleteBin6Fill } from 'react-icons/ri';\r\nimport { toast } from 'react-toastify';\r\nimport DeleteModal from '../modals/DeleteModal';\r\n\r\nconst DeleteButton = ({ deleteApiLink, itemId, name, onDelete }) => {\r\n    const deleteItem = () => {\r\n        const token = localStorage.getItem('token'); // Retrieve token from localStorage\r\n\r\n        if (!token) {\r\n            console.error(\"No token found!\");\r\n            toast.error(\"Unauthorized: Please log in again.\");\r\n            return;\r\n        }\r\n\r\n        fetch(deleteApiLink, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                \"Authorization\": `Bearer ${token}`, // Attach token\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) {\r\n                throw new Error(`HTTP error! Status: ${res.status}`);\r\n            }\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            if (data.message && data.message.includes('deleted successfully')) {\r\n                toast(<DeleteModal name={name} />);\r\n                \r\n                if (onDelete && typeof onDelete === 'function') {\r\n                    onDelete();\r\n                }\r\n            } else if (data.deletedCount > 0) {\r\n                toast(<DeleteModal name={name} />);\r\n                \r\n                if (onDelete && typeof onDelete === 'function') {\r\n                    onDelete();\r\n                }\r\n            } else {\r\n                toast.error(`Failed to delete ${name}`);\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Delete error:', error);\r\n            toast.error(`Error deleting ${name}: ${error.message}`);\r\n        });\r\n    };\r\n\r\n    return (\r\n        <button onClick={deleteItem}\r\n            className=\"z-10 block p-1 text-red-700 transition-all bg-red-100 border-2 border-white rounded-full active:bg-red-50 hover:scale-110 focus:outline-none focus:ring\"\r\n            type=\"button\"\r\n        >\r\n            <RiDeleteBin6Fill />\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default DeleteButton;\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;;;AAEA,MAAMC,YAAY,GAAG,QAA+C;EAAA,IAA9C;IAAEC,aAAF;IAAiBC,MAAjB;IAAyBC,IAAzB;IAA+BC;EAA/B,CAA8C;;EAChE,MAAMC,UAAU,GAAG,MAAM;IACrB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADqB,CACwB;;IAE7C,IAAI,CAACF,KAAL,EAAY;MACRG,OAAO,CAACC,KAAR,CAAc,iBAAd;MACAZ,KAAK,CAACY,KAAN,CAAY,oCAAZ;MACA;IACH;;IAEDC,KAAK,CAACV,aAAD,EAAgB;MACjBW,MAAM,EAAE,QADS;MAEjBC,OAAO,EAAE;QACL,iBAAkB,UAASP,KAAM,EAD5B;QAC+B;QACpC,gBAAgB;MAFX;IAFQ,CAAhB,CAAL,CAOCQ,IAPD,CAOMC,GAAG,IAAI;MACT,IAAI,CAACA,GAAG,CAACC,EAAT,EAAa;QACT,MAAM,IAAIC,KAAJ,CAAW,uBAAsBF,GAAG,CAACG,MAAO,EAA5C,CAAN;MACH;;MACD,OAAOH,GAAG,CAACI,IAAJ,EAAP;IACH,CAZD,EAaCL,IAbD,CAaMM,IAAI,IAAI;MACV,IAAIA,IAAI,CAACC,OAAL,IAAgBD,IAAI,CAACC,OAAL,CAAaC,QAAb,CAAsB,sBAAtB,CAApB,EAAmE;QAC/DxB,KAAK,eAAC,QAAC,WAAD;UAAa,IAAI,EAAEK;QAAnB;UAAA;UAAA;UAAA;QAAA,QAAD,CAAL;;QAEA,IAAIC,QAAQ,IAAI,OAAOA,QAAP,KAAoB,UAApC,EAAgD;UAC5CA,QAAQ;QACX;MACJ,CAND,MAMO,IAAIgB,IAAI,CAACG,YAAL,GAAoB,CAAxB,EAA2B;QAC9BzB,KAAK,eAAC,QAAC,WAAD;UAAa,IAAI,EAAEK;QAAnB;UAAA;UAAA;UAAA;QAAA,QAAD,CAAL;;QAEA,IAAIC,QAAQ,IAAI,OAAOA,QAAP,KAAoB,UAApC,EAAgD;UAC5CA,QAAQ;QACX;MACJ,CANM,MAMA;QACHN,KAAK,CAACY,KAAN,CAAa,oBAAmBP,IAAK,EAArC;MACH;IACJ,CA7BD,EA8BCqB,KA9BD,CA8BOd,KAAK,IAAI;MACZD,OAAO,CAACC,KAAR,CAAc,eAAd,EAA+BA,KAA/B;MACAZ,KAAK,CAACY,KAAN,CAAa,kBAAiBP,IAAK,KAAIO,KAAK,CAACW,OAAQ,EAArD;IACH,CAjCD;EAkCH,CA3CD;;EA6CA,oBACI;IAAQ,OAAO,EAAEhB,UAAjB;IACI,SAAS,EAAC,yJADd;IAEI,IAAI,EAAC,QAFT;IAAA,uBAII,QAAC,gBAAD;MAAA;MAAA;MAAA;IAAA;EAJJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAQH,CAtDD;;KAAML,Y;AAwDN,eAAeA,YAAf","ignoreList":[]},"metadata":{},"sourceType":"module"}