{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aweso\\\\OneDrive\\\\Desktop\\\\QuickMeds\\\\frontend\\\\src\\\\pages\\\\POS.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Search, ShoppingCart, Plus, Minus, Trash2, Printer, Save } from 'lucide-react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport SearchBar from '../components/SearchBar';\nimport ProductCard from '../components/ProductCard';\nimport CartItem from '../components/CartItem';\nimport CategoryFilter from '../components/CategoryFilter';\nimport OrderSuccess from '../components/OrderSuccess';\nimport { useMemo } from \"react\";\nimport { toast } from 'sonner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst POS = () => {\n  _s();\n\n  const [pharmacyProducts, setPharmacyProducts] = useState([]);\n  const [nonPharmacyProducts, setNonPharmacyProducts] = useState([]);\n  const [allProducts, setAllProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeCategory, setActiveCategory] = useState('All');\n  const [customerName, setCustomerName] = useState('Walk-in Customer');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [orderSuccess, setOrderSuccess] = useState(false);\n  const [orderNumber, setOrderNumber] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const cartQuantity = useMemo(() => cart.reduce((sum, item) => sum + item.quantity, 0), [cart]); // Fetch Initial Limited Products\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        var _pharmacyData$data, _nonPharmacyData$data;\n\n        setLoading(true);\n        const [pharmacyRes, nonPharmacyRes] = await Promise.all([fetch('http://localhost:5000/api/products/pharmacy?limit=50'), fetch('http://localhost:5000/api/products/nonpharmacy?limit=50')]);\n\n        if (!pharmacyRes.ok || !nonPharmacyRes.ok) {\n          throw new Error('Failed to fetch products');\n        }\n\n        const [pharmacyData, nonPharmacyData] = await Promise.all([pharmacyRes.json(), nonPharmacyRes.json()]);\n        setPharmacyProducts(((_pharmacyData$data = pharmacyData.data) === null || _pharmacyData$data === void 0 ? void 0 : _pharmacyData$data.slice(0, 50)) || []);\n        setNonPharmacyProducts(((_nonPharmacyData$data = nonPharmacyData.data) === null || _nonPharmacyData$data === void 0 ? void 0 : _nonPharmacyData$data.slice(0, 50)) || []);\n      } catch (err) {\n        setError('Failed to load products. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n  useEffect(() => {\n    const searchProducts = async () => {\n      if (searchTerm.trim() === '') {\n        setSearchResults([]);\n        return;\n      }\n\n      try {\n        const searchEndpoint = 'http://localhost:5000/api/products/pharmacy?all=true/';\n        const response = await fetch(`${searchEndpoint}?q=${encodeURIComponent(searchTerm)}`);\n\n        if (!response.ok) {\n          throw new Error('Search request failed');\n        }\n\n        const data = await response.json();\n        setSearchResults(data || []); // Ensure correct data handling\n      } catch (err) {\n        console.error('Search Error:', err);\n        setSearchResults([]);\n      }\n    };\n\n    const timer = setTimeout(searchProducts, 300); // Debounce API call\n\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n  useEffect(() => {\n    const combinedProducts = [...pharmacyProducts.map(product => ({ ...product,\n      type: 'Pharmacy'\n    })), ...nonPharmacyProducts.map(product => ({ ...product,\n      type: 'Non-Pharmacy'\n    }))];\n\n    if (searchTerm.trim() !== '' && Array.isArray(searchResults) && searchResults.length > 0) {\n      setFilteredProducts(searchResults.map(product => ({ ...product,\n        type: product.type || (product.Unit_MRP ? 'Pharmacy' : 'Non-Pharmacy')\n      })));\n    } else {\n      setAllProducts(combinedProducts);\n      setFilteredProducts(combinedProducts);\n    }\n  }, [pharmacyProducts, nonPharmacyProducts, searchResults, searchTerm]); // Filter Products Based on Category\n\n  useEffect(() => {\n    let filtered = searchTerm.trim() !== '' && Array.isArray(searchResults) ? [...searchResults] : [...allProducts];\n\n    if (activeCategory !== 'All') {\n      filtered = filtered.filter(product => product.type === activeCategory);\n    }\n\n    setFilteredProducts(filtered);\n  }, [searchTerm, activeCategory, allProducts, searchResults]); // Calculate Total Amount Whenever Cart Changes\n\n  useEffect(() => {\n    calculateTotal(cart);\n  }, [cart]);\n\n  const calculateTotal = cartItems => {\n    const total = cartItems.reduce((sum, item) => sum + (item.Unit_MRP || item.unitMrp) * item.quantity, 0);\n    setTotalAmount(total);\n  };\n\n  const addToCart = product => {\n    setCart(prevCart => {\n      return prevCart.map(item => item._id === product._id && item.quantity < (product.Stock || product.stock) ? { ...item,\n        quantity: item.quantity + 1\n      } : item).concat(!prevCart.some(item => item._id === product._id) ? [{ ...product,\n        quantity: 1\n      }] : []);\n    });\n  };\n\n  const increaseQuantity = productId => {\n    setCart(prevCart => {\n      return prevCart.map(item => {\n        if (item._id === productId) {\n          const product = allProducts.find(p => p._id === productId) || searchResults.find(p => p._id === productId);\n\n          if (item.quantity < (product.Stock || product.stock)) {\n            return { ...item,\n              quantity: item.quantity + 1\n            };\n          } else {\n            toast.error(`${item.tradeName || item.Product_name} is out of stock`);\n          }\n        }\n\n        return item;\n      });\n    });\n  };\n\n  const decreaseQuantity = productId => {\n    setCart(prevCart => {\n      return prevCart.map(item => {\n        if (item._id === productId && item.quantity > 1) {\n          return { ...item,\n            quantity: item.quantity - 1\n          };\n        }\n\n        return item;\n      });\n    });\n  };\n\n  const removeFromCart = productId => {\n    const itemToRemove = cart.find(item => item._id === productId);\n\n    if (itemToRemove) {\n      setCart(prevCart => prevCart.filter(item => item._id !== productId));\n      toast.info(`${itemToRemove.tradeName || itemToRemove.Product_name} removed from cart`);\n    }\n  };\n\n  const clearCart = () => {\n    setCart([]);\n    setTotalAmount(0);\n    toast.info('Cart has been cleared');\n  };\n\n  const submitOrder = () => {\n    if (cart.length === 0) {\n      toast.error('Cart is empty. Please add products to proceed.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    const orderDetails = {\n      customer_name: customerName,\n      products: cart.map(item => ({\n        product_id: item._id,\n        product_name: item.tradeName || item.Product_name,\n        price: item.Unit_MRP || item.unitMrp,\n        quantity: item.quantity,\n        subtotal: (item.Unit_MRP || item.unitMrp) * item.quantity\n      })),\n      total_amount: totalAmount,\n      created_at: new Date()\n    };\n    fetch('http://localhost:5000/api/products/sales', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(orderDetails)\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error('Failed to submit order');\n      }\n\n      return res.json();\n    }).then(data => {\n      setOrderSuccess(true);\n      setOrderNumber(data.order_id || Date.now().toString().slice(-8));\n      setIsSubmitting(false);\n    }).catch(err => {\n      console.error('Error placing order:', err);\n      toast.error('Failed to place order. Please try again.');\n      setIsSubmitting(false);\n    });\n  };\n\n  const printReceipt = () => {\n    const receiptWindow = window.open('', '_blank');\n\n    if (receiptWindow) {\n      receiptWindow.document.write(`\n                <html>\n                <head>\n                    <title>Receipt - Order #${orderNumber}</title>\n                    <style>\n                        @media print {\n                            @page { margin: 0; }\n                            body { margin: 1cm; }\n                        }\n                        body {\n                            font-family: 'Helvetica', 'Arial', sans-serif;\n                            max-width: 300px;\n                            margin: 0 auto;\n                            padding: 10px;\n                            color: #333;\n                            line-height: 1.4;\n                        }\n                        .receipt {\n                            border: 1px solid #ddd;\n                            border-radius: 8px;\n                            padding: 15px;\n                            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n                            background: #fff;\n                        }\n                        .header {\n                            text-align: center;\n                            margin-bottom: 15px;\n                            padding-bottom: 15px;\n                            border-bottom: 2px dashed #eee;\n                        }\n                        .logo {\n                            font-size: 24px;\n                            font-weight: bold;\n                            margin-bottom: 5px;\n                            color: #2563eb;\n                        }\n                        .store-info {\n                            font-size: 12px;\n                            color: #666;\n                            margin-bottom: 10px;\n                        }\n                        .receipt-title {\n                            font-size: 16px;\n                            text-transform: uppercase;\n                            letter-spacing: 2px;\n                            margin: 10px 0;\n                        }\n                        .order-info {\n                            display: flex;\n                            justify-content: space-between;\n                            font-size: 12px;\n                            margin-bottom: 15px;\n                        }\n                        .divider {\n                            border-bottom: 1px dashed #eee;\n                            margin: 10px 0;\n                        }\n                        .items-table {\n                            width: 100%;\n                            border-collapse: collapse;\n                            margin: 15px 0;\n                        }\n                        .items-table th {\n                            text-align: left;\n                            font-size: 12px;\n                            padding: 5px 0;\n                            border-bottom: 1px solid #ddd;\n                            color: #666;\n                        }\n                        .items-table td {\n                            padding: 8px 0;\n                            font-size: 12px;\n                            border-bottom: 1px dotted #eee;\n                        }\n                        .item-name {\n                            max-width: 150px;\n                            overflow: hidden;\n                            text-overflow: ellipsis;\n                            white-space: nowrap;\n                        }\n                        .qty {\n                            text-align: center;\n                        }\n                        .price, .subtotal {\n                            text-align: right;\n                        }\n                        .summary {\n                            margin-top: 15px;\n                            font-size: 12px;\n                        }\n                        .total-row {\n                            display: flex;\n                            justify-content: space-between;\n                            font-weight: bold;\n                            font-size: 14px;\n                            margin-top: 10px;\n                            padding-top: 10px;\n                            border-top: 2px solid #333;\n                        }\n                        .footer {\n                            margin-top: 20px;\n                            text-align: center;\n                            font-size: 11px;\n                            color: #777;\n                        }\n                        .barcode {\n                            text-align: center;\n                            margin: 15px 0;\n                            font-family: 'Courier New', monospace;\n                            font-size: 14px;\n                            letter-spacing: 2px;\n                        }\n                        .thank-you {\n                            text-align: center;\n                            font-size: 14px;\n                            margin: 15px 0 5px;\n                        }\n                        .policies {\n                            font-size: 10px;\n                            color: #999;\n                            text-align: center;\n                            margin-top: 10px;\n                        }\n                    </style>\n                </head>\n                <body>\n                    <div class=\"receipt\">\n                        <div class=\"header\">\n                            <div class=\"logo\">PHARMACY POS</div>\n                            <div class=\"store-info\">\n                                123 Health Street, Medical District<br>\n                                Phone: (123) 456-7890<br>\n                                Email: pharmacy@example.com\n                            </div>\n                            <div class=\"receipt-title\">Sales Receipt</div>\n                        </div>\n                        \n                        <div class=\"order-info\">\n                            <div>\n                                <strong>Order #:</strong> ${orderNumber}<br>\n                                <strong>Customer:</strong> ${customerName}\n                            </div>\n                            <div>\n                                <strong>Date:</strong> ${new Date().toLocaleDateString()}<br>\n                                <strong>Time:</strong> ${new Date().toLocaleTimeString()}\n                            </div>\n                        </div>\n                        \n                        <div class=\"divider\"></div>\n                        \n                        <table class=\"items-table\">\n                            <thead>\n                                <tr>\n                                    <th>Item</th>\n                                    <th class=\"qty\">Qty</th>\n                                    <th class=\"price\">Price</th>\n                                    <th class=\"subtotal\">Total</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                ${cart.map(item => `\n                                    <tr>\n                                        <td class=\"item-name\">${item.tradeName || item.Product_name}</td>\n                                        <td class=\"qty\">${item.quantity}</td>\n                                        <td class=\"price\">$${(item.Unit_MRP || item.unitMrp).toFixed(2)}</td>\n                                        <td class=\"subtotal\">$${((item.Unit_MRP || item.unitMrp) * item.quantity).toFixed(2)}</td>\n                                    </tr>\n                                `).join('')}\n                            </tbody>\n                        </table>\n                        \n                        <div class=\"summary\">\n                            <div class=\"total-row\">\n                                <span>TOTAL</span>\n                                <span>$${totalAmount.toFixed(2)}</span>\n                            </div>\n                        </div>\n                        \n                        <div class=\"barcode\">\n                            *${orderNumber}*\n                        </div>\n                        \n                        <div class=\"thank-you\">Thank you for your purchase!</div>\n                        \n                        <div class=\"policies\">\n                            Return policy: Items may be returned within 7 days with receipt.<br>\n                            Prescription medications cannot be returned once dispensed.\n                        </div>\n                        \n                        <div class=\"footer\">\n                            Powered by Pharmacy POS System<br>\n                            ${new Date().toISOString().split('T')[0]}\n                        </div>\n                    </div>\n                </body>\n                </html>\n            `);\n      receiptWindow.document.close();\n      receiptWindow.print();\n    } else {\n      alert('Could not open print window. Please check your popup blocker settings.');\n    }\n  };\n\n  const createNewOrder = () => {\n    setCart([]);\n    setTotalAmount(0);\n    setCustomerName('Walk-in Customer');\n    setOrderSuccess(false);\n    setOrderNumber(null);\n  };\n\n  if (loading && allProducts.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex flex-col items-center justify-center p-4 bg-background\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel rounded-xl p-8 text-center shadow-sm max-w-md w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-pulse flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-20 h-20 rounded-full bg-primary/20 mb-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-8 bg-secondary w-3/4 rounded-md mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-4 bg-secondary w-1/2 rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-8 text-muted-foreground\",\n          children: \"Loading products...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex flex-col items-center justify-center p-4 bg-background\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel rounded-xl p-8 text-center shadow-sm max-w-md w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-20 h-20 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-10 w-10 text-destructive\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"12\",\n              cy: \"12\",\n              r: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"12\",\n              y1: \"8\",\n              x2: \"12\",\n              y2: \"12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"12\",\n              y1: \"16\",\n              x2: \"12.01\",\n              y2: \"16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold mb-4 text-foreground\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"mt-4 py-2 px-6 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors duration-300\",\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (orderSuccess) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center p-6 bg-background\",\n      children: /*#__PURE__*/_jsxDEV(OrderSuccess, {\n        orderNumber: orderNumber,\n        onPrintReceipt: printReceipt,\n        onNewOrder: createNewOrder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-background pb-6\",\n    children: [/*#__PURE__*/_jsxDEV(motion.header, {\n      className: \"bg-gray-900 text-white shadow-md p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n            className: \"h-6 w-6 text-yellow-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-bold text-white\",\n            children: \"Point of Sale\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: cartQuantity > 0 && /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              scale: 0\n            },\n            animate: {\n              scale: 1\n            },\n            className: \"bg-yellow-400 text-gray-900 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold\",\n            children: cartQuantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 pt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              y: 20\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            transition: {\n              duration: 0.4,\n              delay: 0.1\n            },\n            children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n              value: searchTerm,\n              onChange: setSearchTerm,\n              placeholder: \"Search products by name...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CategoryFilter, {\n              activeCategory: activeCategory,\n              onCategoryChange: setActiveCategory,\n              categories: [{\n                id: 'All',\n                name: 'All Products'\n              }, {\n                id: 'Pharmacy',\n                name: 'Pharmacy'\n              }, {\n                id: 'Non-Pharmacy',\n                name: 'Non-Pharmacy'\n              }]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 flex items-center justify-between\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold\",\n                children: [\"Available Products\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-sm font-medium text-muted-foreground\",\n                  children: [\"(\", filteredProducts.length, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative h-[calc(100vh-280px)] overflow-y-auto pr-1\",\n              children: filteredProducts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"glass-panel rounded-xl p-8 text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-muted-foreground\",\n                  children: searchTerm ? 'No products found. Try a different search term.' : 'No products available in this category.'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4\",\n                children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n                  product: product,\n                  onAddToCart: addToCart\n                }, product._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            x: 20\n          },\n          animate: {\n            opacity: 1,\n            x: 0\n          },\n          transition: {\n            duration: 0.4,\n            delay: 0.2\n          },\n          className: \"glass-panel rounded-xl border border-border/50 shadow-sm p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n                className: \"h-5 w-5 mr-2 text-primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 33\n              }, this), \"Shopping Cart\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 29\n            }, this), cart.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: clearCart,\n              className: \"text-xs px-2 py-1 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded transition-colors duration-200\",\n              children: \"Clear cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-foreground\",\n              children: \"Customer Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: customerName,\n              onChange: e => setCustomerName(e.target.value),\n              className: \"w-full mt-1 px-3 py-2 rounded-md border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary/30 transition-all duration-200\",\n              placeholder: \"Enter customer name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-[calc(100vh-410px)] overflow-y-auto pr-1 mb-6\",\n            children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n              children: cart.length === 0 ? /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0\n                },\n                animate: {\n                  opacity: 1\n                },\n                className: \"text-center py-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-16 h-16 rounded-full bg-muted mx-auto flex items-center justify-center mb-4\",\n                  children: /*#__PURE__*/_jsxDEV(ShoppingCart, {\n                    className: \"h-8 w-8 text-muted-foreground\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-muted-foreground\",\n                  children: \"Your cart is empty.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-muted-foreground mt-1\",\n                  children: \"Add products to get started.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 37\n              }, this) : cart.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n                item: item,\n                onIncrease: increaseQuantity,\n                onDecrease: decreaseQuantity,\n                onRemove: removeFromCart\n              }, item._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-auto pt-4 border-t border-border\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-baseline text-lg mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold\",\n                children: [\"$\", totalAmount.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: submitOrder,\n              disabled: cart.length === 0 || isSubmitting,\n              className: `w-full flex items-center justify-center py-3 px-4 rounded-lg text-white font-medium transition-all duration-300 ${cart.length === 0 || isSubmitting ? 'bg-muted text-muted-foreground cursor-not-allowed' : 'bg-primary hover:bg-primary/90 shadow-sm hover:shadow'}`,\n              children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-5 h-5 border-2 border-white/30 border-t-white/90 rounded-full animate-spin mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 41\n                }, this), \"Processing...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"h-5 w-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 41\n                }, this), \"Submit Order\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 655,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 509,\n    columnNumber: 9\n  }, this);\n};\n\n_s(POS, \"yigAzRo3Mm8w8b6Pc1MBlquaG/c=\");\n\n_c = POS;\nexport default POS;\n\nvar _c;\n\n$RefreshReg$(_c, \"POS\");","map":{"version":3,"names":["React","useEffect","useState","Search","ShoppingCart","Plus","Minus","Trash2","Printer","Save","AnimatePresence","motion","SearchBar","ProductCard","CartItem","CategoryFilter","OrderSuccess","useMemo","toast","POS","pharmacyProducts","setPharmacyProducts","nonPharmacyProducts","setNonPharmacyProducts","allProducts","setAllProducts","filteredProducts","setFilteredProducts","searchResults","setSearchResults","cart","setCart","totalAmount","setTotalAmount","searchTerm","setSearchTerm","activeCategory","setActiveCategory","customerName","setCustomerName","isSubmitting","setIsSubmitting","orderSuccess","setOrderSuccess","orderNumber","setOrderNumber","loading","setLoading","error","setError","cartQuantity","reduce","sum","item","quantity","fetchProducts","pharmacyRes","nonPharmacyRes","Promise","all","fetch","ok","Error","pharmacyData","nonPharmacyData","json","data","slice","err","searchProducts","trim","searchEndpoint","response","encodeURIComponent","console","timer","setTimeout","clearTimeout","combinedProducts","map","product","type","Array","isArray","length","Unit_MRP","filtered","filter","calculateTotal","cartItems","total","unitMrp","addToCart","prevCart","_id","Stock","stock","concat","some","increaseQuantity","productId","find","p","tradeName","Product_name","decreaseQuantity","removeFromCart","itemToRemove","info","clearCart","submitOrder","orderDetails","customer_name","products","product_id","product_name","price","subtotal","total_amount","created_at","Date","method","headers","body","JSON","stringify","then","res","order_id","now","toString","catch","printReceipt","receiptWindow","window","open","document","write","toLocaleDateString","toLocaleTimeString","toFixed","join","toISOString","split","close","print","alert","createNewOrder","location","reload","scale","opacity","y","duration","delay","id","name","x","e","target","value"],"sources":["C:/Users/aweso/OneDrive/Desktop/QuickMeds/frontend/src/pages/POS.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Search, ShoppingCart, Plus, Minus, Trash2, Printer, Save } from 'lucide-react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport SearchBar from '../components/SearchBar';\r\nimport ProductCard from '../components/ProductCard';\r\nimport CartItem from '../components/CartItem';\r\nimport CategoryFilter from '../components/CategoryFilter';\r\nimport OrderSuccess from '../components/OrderSuccess';\r\nimport { useMemo } from \"react\";\r\nimport { toast } from 'sonner';\r\n\r\nconst POS = () => {\r\n    const [pharmacyProducts, setPharmacyProducts] = useState([]);\r\n    const [nonPharmacyProducts, setNonPharmacyProducts] = useState([]);\r\n    const [allProducts, setAllProducts] = useState([]);\r\n    const [filteredProducts, setFilteredProducts] = useState([]);\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [cart, setCart] = useState([]);\r\n    const [totalAmount, setTotalAmount] = useState(0);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [activeCategory, setActiveCategory] = useState('All');\r\n    const [customerName, setCustomerName] = useState('Walk-in Customer');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [orderSuccess, setOrderSuccess] = useState(false);\r\n    const [orderNumber, setOrderNumber] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const cartQuantity = useMemo(() => \r\n        cart.reduce((sum, item) => sum + item.quantity, 0), \r\n        [cart]\r\n    );\r\n\r\n    // Fetch Initial Limited Products\r\n    useEffect(() => {\r\n        const fetchProducts = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                const [pharmacyRes, nonPharmacyRes] = await Promise.all([\r\n                    fetch('http://localhost:5000/api/products/pharmacy?limit=50'),\r\n                    fetch('http://localhost:5000/api/products/nonpharmacy?limit=50'),\r\n                ]);\r\n\r\n                if (!pharmacyRes.ok || !nonPharmacyRes.ok) {\r\n                    throw new Error('Failed to fetch products');\r\n                }\r\n\r\n                const [pharmacyData, nonPharmacyData] = await Promise.all([\r\n                    pharmacyRes.json(),\r\n                    nonPharmacyRes.json(),\r\n                ]);\r\n\r\n                setPharmacyProducts(pharmacyData.data?.slice(0, 50) || []);\r\n                setNonPharmacyProducts(nonPharmacyData.data?.slice(0, 50) || []);\r\n            } catch (err) {\r\n                setError('Failed to load products. Please try again.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const searchProducts = async () => {\r\n            if (searchTerm.trim() === '') {\r\n                setSearchResults([]);\r\n                return;\r\n            }\r\n    \r\n            try {\r\n                const searchEndpoint = 'http://localhost:5000/api/products/pharmacy?all=true/';\r\n    \r\n                const response = await fetch(\r\n                    `${searchEndpoint}?q=${encodeURIComponent(searchTerm)}`\r\n                );\r\n    \r\n                if (!response.ok) {\r\n                    throw new Error('Search request failed');\r\n                }\r\n    \r\n                const data = await response.json();\r\n                setSearchResults(data || []); // Ensure correct data handling\r\n            } catch (err) {\r\n                console.error('Search Error:', err);\r\n                setSearchResults([]);\r\n            }\r\n        };\r\n    \r\n        const timer = setTimeout(searchProducts, 300); // Debounce API call\r\n    \r\n        return () => clearTimeout(timer);\r\n    }, [searchTerm]);\r\n\r\n    useEffect(() => {\r\n        const combinedProducts = [\r\n            ...pharmacyProducts.map(product => ({ ...product, type: 'Pharmacy' })),\r\n            ...nonPharmacyProducts.map(product => ({ ...product, type: 'Non-Pharmacy' })),\r\n        ];\r\n    \r\n        if (searchTerm.trim() !== '' && Array.isArray(searchResults) && searchResults.length > 0) {\r\n            setFilteredProducts(searchResults.map(product => ({\r\n                ...product,\r\n                type: product.type || (product.Unit_MRP ? 'Pharmacy' : 'Non-Pharmacy')\r\n            })));\r\n        } else {\r\n            setAllProducts(combinedProducts);\r\n            setFilteredProducts(combinedProducts);\r\n        }\r\n    }, [pharmacyProducts, nonPharmacyProducts, searchResults, searchTerm]);\r\n    \r\n    // Filter Products Based on Category\r\n    useEffect(() => {\r\n        let filtered = searchTerm.trim() !== '' && Array.isArray(searchResults) ? [...searchResults] : [...allProducts];\r\n    \r\n        if (activeCategory !== 'All') {\r\n            filtered = filtered.filter(product => product.type === activeCategory);\r\n        }\r\n    \r\n        setFilteredProducts(filtered);\r\n    }, [searchTerm, activeCategory, allProducts, searchResults]);\r\n\r\n    // Calculate Total Amount Whenever Cart Changes\r\n    useEffect(() => {\r\n        calculateTotal(cart);\r\n    }, [cart]);\r\n\r\n    const calculateTotal = (cartItems) => {\r\n        const total = cartItems.reduce((sum, item) => sum + (item.Unit_MRP || item.unitMrp) * item.quantity, 0);\r\n        setTotalAmount(total);\r\n    };\r\n\r\n    const addToCart = (product) => {\r\n        setCart(prevCart => {\r\n            return prevCart.map(item =>\r\n                item._id === product._id && item.quantity < (product.Stock || product.stock)\r\n                    ? { ...item, quantity: item.quantity + 1 }\r\n                    : item\r\n            ).concat(!prevCart.some(item => item._id === product._id) ? [{ ...product, quantity: 1 }] : []);\r\n        });\r\n    };\r\n\r\n    const increaseQuantity = (productId) => {\r\n        setCart(prevCart => {\r\n            return prevCart.map(item => {\r\n                if (item._id === productId) {\r\n                    const product = allProducts.find(p => p._id === productId) || \r\n                                  searchResults.find(p => p._id === productId);\r\n                    if (item.quantity < (product.Stock || product.stock)) {\r\n                        return { ...item, quantity: item.quantity + 1 };\r\n                    } else {\r\n                        toast.error(`${item.tradeName || item.Product_name} is out of stock`);\r\n                    }\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n\r\n    const decreaseQuantity = (productId) => {\r\n        setCart(prevCart => {\r\n            return prevCart.map(item => {\r\n                if (item._id === productId && item.quantity > 1) {\r\n                    return { ...item, quantity: item.quantity - 1 };\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n\r\n    const removeFromCart = (productId) => {\r\n        const itemToRemove = cart.find(item => item._id === productId);\r\n        if (itemToRemove) {\r\n            setCart(prevCart => prevCart.filter(item => item._id !== productId));\r\n            toast.info(`${itemToRemove.tradeName || itemToRemove.Product_name} removed from cart`);\r\n        }\r\n    };\r\n\r\n    const clearCart = () => {\r\n        setCart([]);\r\n        setTotalAmount(0);\r\n        toast.info('Cart has been cleared');\r\n    };\r\n\r\n    const submitOrder = () => {\r\n        if (cart.length === 0) {\r\n            toast.error('Cart is empty. Please add products to proceed.');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n\r\n        const orderDetails = {\r\n            customer_name: customerName,\r\n            products: cart.map(item => ({\r\n                product_id: item._id,\r\n                product_name: item.tradeName || item.Product_name,\r\n                price: item.Unit_MRP || item.unitMrp,\r\n                quantity: item.quantity,\r\n                subtotal: (item.Unit_MRP || item.unitMrp) * item.quantity,\r\n            })),\r\n            total_amount: totalAmount,\r\n            created_at: new Date(),\r\n        };\r\n\r\n        fetch('http://localhost:5000/api/products/sales', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(orderDetails),\r\n        })\r\n            .then(res => {\r\n                if (!res.ok) {\r\n                    throw new Error('Failed to submit order');\r\n                }\r\n                return res.json();\r\n            })\r\n            .then(data => {\r\n                setOrderSuccess(true);\r\n                setOrderNumber(data.order_id || Date.now().toString().slice(-8));\r\n                setIsSubmitting(false);\r\n            })\r\n            .catch(err => {\r\n                console.error('Error placing order:', err);\r\n                toast.error('Failed to place order. Please try again.');\r\n                setIsSubmitting(false);\r\n            });\r\n    };\r\n\r\n    const printReceipt = () => {\r\n        const receiptWindow = window.open('', '_blank');\r\n        \r\n        if (receiptWindow) {\r\n            receiptWindow.document.write(`\r\n                <html>\r\n                <head>\r\n                    <title>Receipt - Order #${orderNumber}</title>\r\n                    <style>\r\n                        @media print {\r\n                            @page { margin: 0; }\r\n                            body { margin: 1cm; }\r\n                        }\r\n                        body {\r\n                            font-family: 'Helvetica', 'Arial', sans-serif;\r\n                            max-width: 300px;\r\n                            margin: 0 auto;\r\n                            padding: 10px;\r\n                            color: #333;\r\n                            line-height: 1.4;\r\n                        }\r\n                        .receipt {\r\n                            border: 1px solid #ddd;\r\n                            border-radius: 8px;\r\n                            padding: 15px;\r\n                            box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n                            background: #fff;\r\n                        }\r\n                        .header {\r\n                            text-align: center;\r\n                            margin-bottom: 15px;\r\n                            padding-bottom: 15px;\r\n                            border-bottom: 2px dashed #eee;\r\n                        }\r\n                        .logo {\r\n                            font-size: 24px;\r\n                            font-weight: bold;\r\n                            margin-bottom: 5px;\r\n                            color: #2563eb;\r\n                        }\r\n                        .store-info {\r\n                            font-size: 12px;\r\n                            color: #666;\r\n                            margin-bottom: 10px;\r\n                        }\r\n                        .receipt-title {\r\n                            font-size: 16px;\r\n                            text-transform: uppercase;\r\n                            letter-spacing: 2px;\r\n                            margin: 10px 0;\r\n                        }\r\n                        .order-info {\r\n                            display: flex;\r\n                            justify-content: space-between;\r\n                            font-size: 12px;\r\n                            margin-bottom: 15px;\r\n                        }\r\n                        .divider {\r\n                            border-bottom: 1px dashed #eee;\r\n                            margin: 10px 0;\r\n                        }\r\n                        .items-table {\r\n                            width: 100%;\r\n                            border-collapse: collapse;\r\n                            margin: 15px 0;\r\n                        }\r\n                        .items-table th {\r\n                            text-align: left;\r\n                            font-size: 12px;\r\n                            padding: 5px 0;\r\n                            border-bottom: 1px solid #ddd;\r\n                            color: #666;\r\n                        }\r\n                        .items-table td {\r\n                            padding: 8px 0;\r\n                            font-size: 12px;\r\n                            border-bottom: 1px dotted #eee;\r\n                        }\r\n                        .item-name {\r\n                            max-width: 150px;\r\n                            overflow: hidden;\r\n                            text-overflow: ellipsis;\r\n                            white-space: nowrap;\r\n                        }\r\n                        .qty {\r\n                            text-align: center;\r\n                        }\r\n                        .price, .subtotal {\r\n                            text-align: right;\r\n                        }\r\n                        .summary {\r\n                            margin-top: 15px;\r\n                            font-size: 12px;\r\n                        }\r\n                        .total-row {\r\n                            display: flex;\r\n                            justify-content: space-between;\r\n                            font-weight: bold;\r\n                            font-size: 14px;\r\n                            margin-top: 10px;\r\n                            padding-top: 10px;\r\n                            border-top: 2px solid #333;\r\n                        }\r\n                        .footer {\r\n                            margin-top: 20px;\r\n                            text-align: center;\r\n                            font-size: 11px;\r\n                            color: #777;\r\n                        }\r\n                        .barcode {\r\n                            text-align: center;\r\n                            margin: 15px 0;\r\n                            font-family: 'Courier New', monospace;\r\n                            font-size: 14px;\r\n                            letter-spacing: 2px;\r\n                        }\r\n                        .thank-you {\r\n                            text-align: center;\r\n                            font-size: 14px;\r\n                            margin: 15px 0 5px;\r\n                        }\r\n                        .policies {\r\n                            font-size: 10px;\r\n                            color: #999;\r\n                            text-align: center;\r\n                            margin-top: 10px;\r\n                        }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    <div class=\"receipt\">\r\n                        <div class=\"header\">\r\n                            <div class=\"logo\">PHARMACY POS</div>\r\n                            <div class=\"store-info\">\r\n                                123 Health Street, Medical District<br>\r\n                                Phone: (123) 456-7890<br>\r\n                                Email: pharmacy@example.com\r\n                            </div>\r\n                            <div class=\"receipt-title\">Sales Receipt</div>\r\n                        </div>\r\n                        \r\n                        <div class=\"order-info\">\r\n                            <div>\r\n                                <strong>Order #:</strong> ${orderNumber}<br>\r\n                                <strong>Customer:</strong> ${customerName}\r\n                            </div>\r\n                            <div>\r\n                                <strong>Date:</strong> ${new Date().toLocaleDateString()}<br>\r\n                                <strong>Time:</strong> ${new Date().toLocaleTimeString()}\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"divider\"></div>\r\n                        \r\n                        <table class=\"items-table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Item</th>\r\n                                    <th class=\"qty\">Qty</th>\r\n                                    <th class=\"price\">Price</th>\r\n                                    <th class=\"subtotal\">Total</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                ${cart.map(item => `\r\n                                    <tr>\r\n                                        <td class=\"item-name\">${item.tradeName || item.Product_name}</td>\r\n                                        <td class=\"qty\">${item.quantity}</td>\r\n                                        <td class=\"price\">$${(item.Unit_MRP || item.unitMrp).toFixed(2)}</td>\r\n                                        <td class=\"subtotal\">$${((item.Unit_MRP || item.unitMrp) * item.quantity).toFixed(2)}</td>\r\n                                    </tr>\r\n                                `).join('')}\r\n                            </tbody>\r\n                        </table>\r\n                        \r\n                        <div class=\"summary\">\r\n                            <div class=\"total-row\">\r\n                                <span>TOTAL</span>\r\n                                <span>$${totalAmount.toFixed(2)}</span>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"barcode\">\r\n                            *${orderNumber}*\r\n                        </div>\r\n                        \r\n                        <div class=\"thank-you\">Thank you for your purchase!</div>\r\n                        \r\n                        <div class=\"policies\">\r\n                            Return policy: Items may be returned within 7 days with receipt.<br>\r\n                            Prescription medications cannot be returned once dispensed.\r\n                        </div>\r\n                        \r\n                        <div class=\"footer\">\r\n                            Powered by Pharmacy POS System<br>\r\n                            ${new Date().toISOString().split('T')[0]}\r\n                        </div>\r\n                    </div>\r\n                </body>\r\n                </html>\r\n            `);\r\n            \r\n            receiptWindow.document.close();\r\n            receiptWindow.print();\r\n        } else {\r\n            alert('Could not open print window. Please check your popup blocker settings.');\r\n        }\r\n    };\r\n\r\n    const createNewOrder = () => {\r\n        setCart([]);\r\n        setTotalAmount(0);\r\n        setCustomerName('Walk-in Customer');\r\n        setOrderSuccess(false);\r\n        setOrderNumber(null);\r\n    };\r\n\r\n    if (loading && allProducts.length === 0) {\r\n        return (\r\n            <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-background\">\r\n                <div className=\"glass-panel rounded-xl p-8 text-center shadow-sm max-w-md w-full\">\r\n                    <div className=\"animate-pulse flex flex-col items-center\">\r\n                        <div className=\"w-20 h-20 rounded-full bg-primary/20 mb-6\"></div>\r\n                        <div className=\"h-8 bg-secondary w-3/4 rounded-md mb-4\"></div>\r\n                        <div className=\"h-4 bg-secondary w-1/2 rounded-md\"></div>\r\n                    </div>\r\n                    <p className=\"mt-8 text-muted-foreground\">Loading products...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-background\">\r\n                <div className=\"glass-panel rounded-xl p-8 text-center shadow-sm max-w-md w-full\">\r\n                    <div className=\"w-20 h-20 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-6\">\r\n                        <svg \r\n                            xmlns=\"http://www.w3.org/2000/svg\" \r\n                            className=\"h-10 w-10 text-destructive\" \r\n                            viewBox=\"0 0 24 24\" \r\n                            fill=\"none\" \r\n                            stroke=\"currentColor\" \r\n                            strokeWidth=\"2\" \r\n                            strokeLinecap=\"round\" \r\n                            strokeLinejoin=\"round\"\r\n                        >\r\n                            <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\r\n                            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h2 className=\"text-xl font-bold mb-4 text-foreground\">{error}</h2>\r\n                    <button \r\n                        onClick={() => window.location.reload()} \r\n                        className=\"mt-4 py-2 px-6 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors duration-300\"\r\n                    >\r\n                        Retry\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (orderSuccess) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center p-6 bg-background\">\r\n                <OrderSuccess \r\n                    orderNumber={orderNumber} \r\n                    onPrintReceipt={printReceipt} \r\n                    onNewOrder={createNewOrder} \r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background pb-6\">\r\n        <motion.header className=\"bg-gray-900 text-white shadow-md p-4\">\r\n            <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <ShoppingCart className=\"h-6 w-6 text-yellow-400\" />\r\n                    <h1 className=\"text-xl font-bold text-white\">Point of Sale</h1>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    {cartQuantity > 0 && (\r\n                        <motion.div \r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            className=\"bg-yellow-400 text-gray-900 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold\"\r\n                        >\r\n                            {cartQuantity}\r\n                        </motion.div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </motion.header>\r\n\r\n\r\n            <main className=\"max-w-7xl mx-auto px-4 sm:px-6 pt-6\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    <div className=\"col-span-2\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ duration: 0.4, delay: 0.1 }}\r\n                        >\r\n                            <SearchBar \r\n                                value={searchTerm} \r\n                                onChange={setSearchTerm} \r\n                                placeholder=\"Search products by name...\" \r\n                            />\r\n                            \r\n                            <CategoryFilter \r\n                                activeCategory={activeCategory} \r\n                                onCategoryChange={setActiveCategory} \r\n                                categories={[\r\n                                    { id: 'All', name: 'All Products' },\r\n                                    { id: 'Pharmacy', name: 'Pharmacy' },\r\n                                    { id: 'Non-Pharmacy', name: 'Non-Pharmacy' }\r\n                                ]} \r\n                            />\r\n\r\n                            <div className=\"mb-4 flex items-center justify-between\">\r\n                                <h2 className=\"text-lg font-semibold\">\r\n                                    Available Products \r\n                                    <span className=\"ml-2 text-sm font-medium text-muted-foreground\">\r\n                                        ({filteredProducts.length})\r\n                                    </span>\r\n                                </h2>\r\n                            </div>\r\n\r\n                            <div className=\"relative h-[calc(100vh-280px)] overflow-y-auto pr-1\">\r\n                                {filteredProducts.length === 0 ? (\r\n                                    <div className=\"glass-panel rounded-xl p-8 text-center\">\r\n                                        <p className=\"text-muted-foreground\">\r\n                                            {searchTerm ? \r\n                                                'No products found. Try a different search term.' : \r\n                                                'No products available in this category.'\r\n                                            }\r\n                                        </p>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                                        {filteredProducts.map(product => (\r\n                                            <ProductCard \r\n                                                key={product._id} \r\n                                                product={product} \r\n                                                onAddToCart={addToCart} \r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: 20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ duration: 0.4, delay: 0.2 }}\r\n                        className=\"glass-panel rounded-xl border border-border/50 shadow-sm p-6\"\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <h2 className=\"text-lg font-semibold flex items-center\">\r\n                                <ShoppingCart className=\"h-5 w-5 mr-2 text-primary\" />\r\n                                Shopping Cart\r\n                            </h2>\r\n                            {cart.length > 0 && (\r\n                                <button \r\n                                    onClick={clearCart} \r\n                                    className=\"text-xs px-2 py-1 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded transition-colors duration-200\"\r\n                                >\r\n                                    Clear cart\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        \r\n                        <div className=\"mb-6\">\r\n                            <label className=\"text-sm font-medium text-foreground\">\r\n                                Customer Name\r\n                            </label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={customerName}\r\n                                onChange={e => setCustomerName(e.target.value)}\r\n                                className=\"w-full mt-1 px-3 py-2 rounded-md border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary/30 transition-all duration-200\"\r\n                                placeholder=\"Enter customer name\"\r\n                            />\r\n                        </div>\r\n                        \r\n                        <div className=\"h-[calc(100vh-410px)] overflow-y-auto pr-1 mb-6\">\r\n                            <AnimatePresence>\r\n                                {cart.length === 0 ? (\r\n                                    <motion.div \r\n                                        initial={{ opacity: 0 }}\r\n                                        animate={{ opacity: 1 }}\r\n                                        className=\"text-center py-8\"\r\n                                    >\r\n                                        <div className=\"w-16 h-16 rounded-full bg-muted mx-auto flex items-center justify-center mb-4\">\r\n                                            <ShoppingCart className=\"h-8 w-8 text-muted-foreground\" />\r\n                                        </div>\r\n                                        <p className=\"text-muted-foreground\">\r\n                                            Your cart is empty.\r\n                                        </p>\r\n                                        <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                            Add products to get started.\r\n                                        </p>\r\n                                    </motion.div>\r\n                                ) : (\r\n                                    cart.map(item => (\r\n                                        <CartItem\r\n                                            key={item._id}\r\n                                            item={item}\r\n                                            onIncrease={increaseQuantity}\r\n                                            onDecrease={decreaseQuantity}\r\n                                            onRemove={removeFromCart}\r\n                                        />\r\n                                    ))\r\n                                )}\r\n                            </AnimatePresence>\r\n                        </div>\r\n\r\n                        <div className=\"mt-auto pt-4 border-t border-border\">\r\n                            <div className=\"flex justify-between items-baseline text-lg mb-6\">\r\n                                <span className=\"font-medium\">Total</span>\r\n                                <span className=\"font-bold\">${totalAmount.toFixed(2)}</span>\r\n                            </div>\r\n                            \r\n                            <button\r\n                                onClick={submitOrder}\r\n                                disabled={cart.length === 0 || isSubmitting}\r\n                                className={`w-full flex items-center justify-center py-3 px-4 rounded-lg text-white font-medium transition-all duration-300 ${\r\n                                    cart.length === 0 || isSubmitting\r\n                                        ? 'bg-muted text-muted-foreground cursor-not-allowed'\r\n                                        : 'bg-primary hover:bg-primary/90 shadow-sm hover:shadow'\r\n                                }`}\r\n                            >\r\n                                {isSubmitting ? (\r\n                                    <div className=\"flex items-center\">\r\n                                        <div className=\"w-5 h-5 border-2 border-white/30 border-t-white/90 rounded-full animate-spin mr-2\"></div>\r\n                                        Processing...\r\n                                    </div>\r\n                                ) : (\r\n                                    <>\r\n                                        <Save className=\"h-5 w-5 mr-2\" />\r\n                                        Submit Order\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default POS;"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4DA,WAAY;AACxE,6DAA6DN,YAAa;AAC1E;AACA;AACA,yDAAyD,IAAIkF,IAAJ,GAAWkB,kBAAX,EAAgC;AACzF,yDAAyD,IAAIlB,IAAJ,GAAWmB,kBAAX,EAAgC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC7G,IAAI,CAACiD,GAAL,CAAS1B,IAAI,IAAK;AACpD;AACA,gEAAgEA,IAAI,CAACkD,SAAL,IAAkBlD,IAAI,CAACmD,YAAa;AACpG,0DAA0DnD,IAAI,CAACC,QAAS;AACxE,6DAA6D,CAACD,IAAI,CAACgC,QAAL,IAAiBhC,IAAI,CAACsC,OAAvB,EAAgCiD,OAAhC,CAAwC,CAAxC,CAA2C;AACxG,gEAAgE,CAAC,CAACvF,IAAI,CAACgC,QAAL,IAAiBhC,IAAI,CAACsC,OAAvB,IAAkCtC,IAAI,CAACC,QAAxC,EAAkDsF,OAAlD,CAA0D,CAA1D,CAA6D;AAC7H;AACA,iCAPkC,EAOCC,IAPD,CAOM,EAPN,CAOU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC7G,WAAW,CAAC4G,OAAZ,CAAoB,CAApB,CAAuB;AAChE;AACA;AACA;AACA;AACA,+BAA+BhG,WAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,IAAI4E,IAAJ,GAAWsB,WAAX,GAAyB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","ignoreList":[]},"metadata":{},"sourceType":"module"}