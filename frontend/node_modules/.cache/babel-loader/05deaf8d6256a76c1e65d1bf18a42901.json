{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aweso\\\\OneDrive\\\\Desktop\\\\QuickMeds\\\\frontend\\\\src\\\\components\\\\buttons\\\\DeleteButton.js\";\nimport React from 'react';\nimport { RiDeleteBin6Fill } from 'react-icons/ri';\nimport { toast } from 'react-toastify';\nimport DeleteModal from '../modals/DeleteModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteButton = _ref => {\n  let {\n    deleteApiLink,\n    itemId,\n    name,\n    onDelete\n  } = _ref;\n\n  const deleteItem = async () => {\n    const token = localStorage.getItem('token'); // Retrieve token from localStorage\n\n    if (!token) {\n      console.error(\"‚ùå No token found! User might be logged out.\");\n      toast.error(\"Unauthorized: Please log in again.\");\n      return;\n    }\n\n    try {\n      const response = await fetch(deleteApiLink, {\n        method: 'DELETE',\n        headers: {\n          \"Authorization\": `Bearer ${token.trim()}`,\n          // Trim whitespace\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log(\"üîç Response Status:\", response.status); // Debugging\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log(\"‚úÖ Deletion Response:\", data); // Debugging\n\n      if (data.message && data.message.includes('deleted successfully')) {\n        toast( /*#__PURE__*/_jsxDEV(DeleteModal, {\n          name: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 23\n        }, this));\n      } else if (data.deletedCount > 0) {\n        toast( /*#__PURE__*/_jsxDEV(DeleteModal, {\n          name: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 23\n        }, this));\n      } else {\n        toast.error(`Failed to delete ${name}`);\n      }\n\n      if (onDelete && typeof onDelete === 'function') {\n        onDelete();\n      }\n    } catch (error) {\n      console.error('‚ùå Delete error:', error);\n      toast.error(`Error deleting ${name}: ${error.message}`);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: deleteItem,\n    className: \"z-10 block p-1 text-red-700 transition-all bg-red-100 border-2 border-white rounded-full active:bg-red-50 hover:scale-110 focus:outline-none focus:ring\",\n    type: \"button\",\n    children: /*#__PURE__*/_jsxDEV(RiDeleteBin6Fill, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_c = DeleteButton;\nexport default DeleteButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"names":["React","RiDeleteBin6Fill","toast","DeleteModal","DeleteButton","deleteApiLink","itemId","name","onDelete","deleteItem","token","localStorage","getItem","console","error","response","fetch","method","headers","trim","log","status","ok","Error","data","json","message","includes","deletedCount"],"sources":["C:/Users/aweso/OneDrive/Desktop/QuickMeds/frontend/src/components/buttons/DeleteButton.js"],"sourcesContent":["import React from 'react';\r\nimport { RiDeleteBin6Fill } from 'react-icons/ri';\r\nimport { toast } from 'react-toastify';\r\nimport DeleteModal from '../modals/DeleteModal';\r\n\r\nconst DeleteButton = ({ deleteApiLink, itemId, name, onDelete }) => {\r\n    const deleteItem = async () => {\r\n        const token = localStorage.getItem('token'); // Retrieve token from localStorage\r\n\r\n        if (!token) {\r\n            console.error(\"‚ùå No token found! User might be logged out.\");\r\n            toast.error(\"Unauthorized: Please log in again.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(deleteApiLink, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token.trim()}`, // Trim whitespace\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })            \r\n\r\n            console.log(\"üîç Response Status:\", response.status); // Debugging\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            console.log(\"‚úÖ Deletion Response:\", data); // Debugging\r\n\r\n            if (data.message && data.message.includes('deleted successfully')) {\r\n                toast(<DeleteModal name={name} />);\r\n            } else if (data.deletedCount > 0) {\r\n                toast(<DeleteModal name={name} />);\r\n            } else {\r\n                toast.error(`Failed to delete ${name}`);\r\n            }\r\n\r\n            if (onDelete && typeof onDelete === 'function') {\r\n                onDelete();\r\n            }\r\n        } catch (error) {\r\n            console.error('‚ùå Delete error:', error);\r\n            toast.error(`Error deleting ${name}: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <button onClick={deleteItem}\r\n            className=\"z-10 block p-1 text-red-700 transition-all bg-red-100 border-2 border-white rounded-full active:bg-red-50 hover:scale-110 focus:outline-none focus:ring\"\r\n            type=\"button\"\r\n        >\r\n            <RiDeleteBin6Fill />\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default DeleteButton;"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;;;AAEA,MAAMC,YAAY,GAAG,QAA+C;EAAA,IAA9C;IAAEC,aAAF;IAAiBC,MAAjB;IAAyBC,IAAzB;IAA+BC;EAA/B,CAA8C;;EAChE,MAAMC,UAAU,GAAG,YAAY;IAC3B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAD2B,CACkB;;IAE7C,IAAI,CAACF,KAAL,EAAY;MACRG,OAAO,CAACC,KAAR,CAAc,6CAAd;MACAZ,KAAK,CAACY,KAAN,CAAY,oCAAZ;MACA;IACH;;IAED,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACX,aAAD,EAAgB;QACxCY,MAAM,EAAE,QADgC;QAExCC,OAAO,EAAE;UACL,iBAAkB,UAASR,KAAK,CAACS,IAAN,EAAa,EADnC;UACsC;UAC3C,gBAAgB;QAFX;MAF+B,CAAhB,CAA5B;MAQAN,OAAO,CAACO,GAAR,CAAY,qBAAZ,EAAmCL,QAAQ,CAACM,MAA5C,EATA,CASqD;;MACrD,IAAI,CAACN,QAAQ,CAACO,EAAd,EAAkB;QACd,MAAM,IAAIC,KAAJ,CAAW,uBAAsBR,QAAQ,CAACM,MAAO,EAAjD,CAAN;MACH;;MAED,MAAMG,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAAnB;MACAZ,OAAO,CAACO,GAAR,CAAY,sBAAZ,EAAoCI,IAApC,EAfA,CAe2C;;MAE3C,IAAIA,IAAI,CAACE,OAAL,IAAgBF,IAAI,CAACE,OAAL,CAAaC,QAAb,CAAsB,sBAAtB,CAApB,EAAmE;QAC/DzB,KAAK,eAAC,QAAC,WAAD;UAAa,IAAI,EAAEK;QAAnB;UAAA;UAAA;UAAA;QAAA,QAAD,CAAL;MACH,CAFD,MAEO,IAAIiB,IAAI,CAACI,YAAL,GAAoB,CAAxB,EAA2B;QAC9B1B,KAAK,eAAC,QAAC,WAAD;UAAa,IAAI,EAAEK;QAAnB;UAAA;UAAA;UAAA;QAAA,QAAD,CAAL;MACH,CAFM,MAEA;QACHL,KAAK,CAACY,KAAN,CAAa,oBAAmBP,IAAK,EAArC;MACH;;MAED,IAAIC,QAAQ,IAAI,OAAOA,QAAP,KAAoB,UAApC,EAAgD;QAC5CA,QAAQ;MACX;IACJ,CA5BD,CA4BE,OAAOM,KAAP,EAAc;MACZD,OAAO,CAACC,KAAR,CAAc,iBAAd,EAAiCA,KAAjC;MACAZ,KAAK,CAACY,KAAN,CAAa,kBAAiBP,IAAK,KAAIO,KAAK,CAACY,OAAQ,EAArD;IACH;EACJ,CAzCD;;EA2CA,oBACI;IAAQ,OAAO,EAAEjB,UAAjB;IACI,SAAS,EAAC,yJADd;IAEI,IAAI,EAAC,QAFT;IAAA,uBAII,QAAC,gBAAD;MAAA;MAAA;MAAA;IAAA;EAJJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAQH,CApDD;;KAAML,Y;AAsDN,eAAeA,YAAf","ignoreList":[]},"metadata":{},"sourceType":"module"}