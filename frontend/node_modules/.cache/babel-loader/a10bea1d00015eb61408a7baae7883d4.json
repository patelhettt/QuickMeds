{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aweso\\\\OneDrive\\\\Desktop\\\\QuickMeds\\\\frontend\\\\src\\\\pages\\\\Dashboard\\\\Products\\\\NonPharmacyProducts.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport SaveButton from '../../../components/buttons/SaveButton';\nimport CancelButton from '../../../components/buttons/CancelButton';\nimport PrintButton from '../../../components/buttons/PrintButton';\nimport NewButton from '../../../components/buttons/NewButton';\nimport Input from '../../../components/form/Input';\nimport Select from '../../../components/form/Select';\nimport DoubleInput from '../../../components/form/DoubleInput';\nimport ModalCloseButton from '../../../components/buttons/ModalCloseButton';\nimport ModalHeading from '../../../components/headings/ModalHeading';\nimport RefreshButton from '../../../components/buttons/RefreshButton';\nimport TableRow from '../../../components/TableRow';\nimport EditButton from '../../../components/buttons/EditButton';\nimport DeleteButton from '../../../components/buttons/DeleteButton';\nimport { toast } from 'react-toastify';\nimport DashboardPageHeading from '../../../components/headings/DashboardPageHeading';\nimport AddModal from '../../../components/modals/AddModal';\nimport { BiEdit } from 'react-icons/bi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:5000/api/products/nonPharmacy'; // Custom EditButton component for NonPharmacy products\n\nconst EditNonPharmacyButton = _ref => {\n  _s();\n\n  let {\n    id,\n    onUpdate\n  } = _ref;\n  const [product, setProduct] = useState({});\n  const [categories, setCategories] = useState([]);\n  const [companies, setCompanies] = useState([]);\n  const [unitTypes, setUnitTypes] = useState([]);\n  const [modalId, setModalId] = useState(`update-non-pharmacy-product-${id}`); // Update modalId when id changes\n\n  useEffect(() => {\n    setModalId(`update-non-pharmacy-product-${id}`);\n  }, [id]);\n  useEffect(() => {\n    if (!id) return;\n    fetch(`${API_BASE_URL}/${id}`, {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\n      return res.json();\n    }).then(data => {\n      console.log(\"Fetched product data:\", data);\n      setProduct(data);\n    }).catch(error => {\n      console.error(\"Error fetching product:\", error);\n      toast.error(\"Failed to load product data\");\n    });\n  }, [id]);\n  useEffect(() => {\n    fetch('http://localhost:5000/api/setup/categories', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\n      return res.json();\n    }).then(data => {\n      setCategories(data);\n    }).catch(error => {\n      console.error(\"Error fetching categories:\", error);\n      toast.error(\"Failed to load categories\");\n    });\n  }, []);\n  useEffect(() => {\n    fetch('http://localhost:5000/api/setup/companies', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\n      return res.json();\n    }).then(data => {\n      setCompanies(data);\n    }).catch(error => {\n      console.error(\"Error fetching companies:\", error);\n      toast.error(\"Failed to load companies\");\n    });\n  }, []);\n  useEffect(() => {\n    fetch('http://localhost:5000/api/setup/unitTypes', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => {\n      if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\n      return res.json();\n    }).then(data => {\n      setUnitTypes(data);\n    }).catch(error => {\n      console.error(\"Error fetching unit types:\", error);\n      toast.error(\"Failed to load unit types\");\n    });\n  }, []);\n\n  const handleUpdate = event => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const productDetails = Object.fromEntries(formData.entries());\n    console.log(\"Updating product with ID:\", id);\n    console.log(\"Update data:\", productDetails); // Try a different data format that includes only the fields being updated\n\n    const apiData = {\n      updates: {\n        Product_name: productDetails.Product_name,\n        Category: productDetails.Category,\n        Company: productDetails.Company,\n        Stock: productDetails.Stock,\n        Pack_Type: productDetails.Pack_Type,\n        Pack_TP: parseFloat(productDetails.Pack_TP),\n        Pack_MRP: parseFloat(productDetails.Pack_MRP)\n      }\n    };\n    console.log(\"Using updates object format:\", apiData); // Try the standard endpoint with PUT\n\n    fetch(`${API_BASE_URL}/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify(apiData)\n    }).then(response => {\n      console.log(\"PUT response status:\", response.status);\n\n      if (!response.ok) {\n        return response.text().then(text => {\n          console.error(\"PUT error response:\", text);\n          throw new Error('Update failed: ' + text);\n        });\n      }\n\n      return response.json();\n    }).then(data => {\n      console.log(\"PUT successful, API response:\", data);\n      toast.success(`Product updated successfully`);\n      document.getElementById(modalId).checked = false; // Force a refresh of the product list\n\n      if (onUpdate) {\n        console.log(\"Triggering product list refresh\");\n        setTimeout(() => onUpdate(), 500);\n      }\n    }).catch(error => {\n      console.error('Error in PUT:', error); // Try a different data format without the updates wrapper\n\n      const directApiData = {\n        Product_name: productDetails.Product_name,\n        Category: productDetails.Category,\n        Company: productDetails.Company,\n        Stock: productDetails.Stock,\n        Pack_Type: productDetails.Pack_Type,\n        Pack_TP: parseFloat(productDetails.Pack_TP),\n        Pack_MRP: parseFloat(productDetails.Pack_MRP),\n        // Include these fields from the original data to ensure they're not lost\n        purchaseVatPercent: 0,\n        purchaseVatTaka: 0,\n        purchaseDiscountPercent: 0,\n        purchaseDiscountTaka: 0,\n        salesVatPercent: 0,\n        salesVatTaka: 0,\n        salesDiscountPercent: 0,\n        salesDiscountTaka: 0,\n        addedBy: \"admin\"\n      };\n      console.log(\"Trying direct data format:\", directApiData); // Try a different endpoint that might be specific to your API\n\n      const updateEndpoint = `http://localhost:5000/api/products/nonPharmacy/update`;\n      console.log(\"Trying update endpoint:\", updateEndpoint);\n      fetch(updateEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          id: id,\n          ...directApiData\n        })\n      }).then(response => {\n        console.log(\"Update endpoint response status:\", response.status);\n\n        if (!response.ok) {\n          return response.text().then(text => {\n            console.error(\"Update endpoint error response:\", text);\n            throw new Error('Update failed: ' + text);\n          });\n        }\n\n        return response.json();\n      }).then(data => {\n        console.log(\"Update endpoint successful, API response:\", data);\n        toast.success(`Product updated successfully`);\n        document.getElementById(modalId).checked = false;\n        if (onUpdate) setTimeout(() => onUpdate(), 500);\n      }).catch(updateError => {\n        console.error('Error in update endpoint:', updateError);\n        toast.error('Failed to update product: ' + updateError.message);\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      id: modalId,\n      className: \"modal-toggle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: modalId,\n      className: \"modal cursor-pointer\",\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"modal-box lg:w-7/12 md:w-10/12 w-11/12 max-w-4xl relative\",\n        htmlFor: \"\",\n        children: [/*#__PURE__*/_jsxDEV(ModalCloseButton, {\n          modalId: modalId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalHeading, {\n          modalHeading: `Update ${product.Product_name || 'Product'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUpdate,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-1 mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              title: 'Product Name',\n              type: \"text\",\n              value: product.Product_name,\n              name: \"Product_name\",\n              isRequired: \"required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              title: 'Category',\n              name: \"Category\",\n              isRequired: \"required\",\n              options: categories.map(c => c.Name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              title: 'Company',\n              name: \"Company\",\n              isRequired: \"required\",\n              options: companies.map(c => c.Name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              title: 'Stock',\n              type: \"number\",\n              value: product.Stock,\n              name: \"Stock\",\n              isRequired: \"required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              title: 'Pack Type',\n              name: \"Pack_Type\",\n              isRequired: \"required\",\n              options: unitTypes.map(u => u.Name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              title: 'Pack TP',\n              type: \"number\",\n              value: product.Pack_TP,\n              name: \"Pack_TP\",\n              isRequired: \"required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              title: 'Pack MRP',\n              type: \"number\",\n              value: product.Pack_MRP,\n              name: \"Pack_MRP\",\n              isRequired: \"required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(SaveButton, {\n              type: \"submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CancelButton, {\n              type: \"button\",\n              onClick: () => document.getElementById(modalId).checked = false,\n              extraClass: \"ml-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: modalId,\n      className: \"btn btn-xs btn-ghost\",\n      children: /*#__PURE__*/_jsxDEV(BiEdit, {\n        className: \"text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EditNonPharmacyButton, \"rX/FIVzwxb2eLkCEZfy7vyxWoMU=\");\n\n_c = EditNonPharmacyButton;\n\nconst NonPharmacyProducts = () => {\n  _s2();\n\n  const [nonPharmacyProducts, setNonPharmacyProducts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalProducts, setTotalProducts] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const productsPerPage = 10;\n  const maxVisiblePages = 5; // Only show 5 pages at a time\n  // Fetch Non-Pharmacy Products\n\n  const fetchProducts = async function (page) {\n    let forceRefresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    try {\n      console.log(`Fetching products for page ${page}${forceRefresh ? ' (forced refresh)' : ''}`); // Add a cache-busting parameter to force a fresh fetch\n\n      const cacheBuster = forceRefresh ? `&_=${Date.now()}` : '';\n      const url = `${API_BASE_URL}?page=${page}&limit=${productsPerPage}${cacheBuster}`;\n      console.log(\"Fetch URL:\", url);\n      const response = await fetch(url);\n      console.log(\"Fetch response status:\", response.status);\n      const data = await response.json();\n\n      if (response.ok) {\n        console.log(\"Fetched non-pharmacy products:\", data.data); // Check if the first product matches our expected updated data\n\n        if (data.data && data.data.length > 0) {\n          console.log(\"First product in response:\", data.data[0]);\n        }\n\n        setNonPharmacyProducts(data.data);\n        setTotalProducts(data.totalItems || 0);\n        setTotalPages(data.totalPages || 1);\n      } else {\n        console.error('Unexpected response format:', data);\n        setNonPharmacyProducts([]);\n      }\n    } catch (error) {\n      console.error('Error fetching non-pharmacy products:', error);\n    }\n  }; // Fetch data when the page changes\n\n\n  useEffect(() => {\n    fetchProducts(currentPage);\n  }, [currentPage]); // Add New Product\n\n  const addNonPharmacyProduct = async event => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const productDetails = Object.fromEntries(formData.entries());\n    productDetails.addedBy = 'admin';\n    productDetails.addedToDbAt = new Date().toISOString();\n\n    try {\n      const response = await fetch(API_BASE_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(productDetails)\n      });\n\n      if (response.ok) {\n        toast( /*#__PURE__*/_jsxDEV(AddModal, {\n          name: productDetails.tradeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 23\n        }, this));\n        fetchProducts(currentPage); // Refresh the product list\n      } else {\n        console.error('Error adding product:', await response.json());\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n\n    event.target.reset();\n  }; // Pagination controls\n\n\n  const handlePageChange = newPage => {\n    if (newPage >= 1 && newPage <= totalPages) {\n      setCurrentPage(newPage);\n    }\n  }; // Render optimized pagination with ellipsis\n\n\n  const renderPagination = () => {\n    const pages = [];\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\n    } // \"Previous\" button\n\n\n    pages.push( /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `btn btn-sm ${currentPage === 1 ? 'btn-disabled' : ''}`,\n      onClick: () => handlePageChange(currentPage - 1),\n      disabled: currentPage === 1,\n      children: \"Previous\"\n    }, \"prev\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 13\n    }, this)); // First page and ellipsis\n\n    if (startPage > 1) {\n      pages.push( /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn btn-sm ${currentPage === 1 ? 'btn-active' : ''}`,\n        onClick: () => handlePageChange(1),\n        children: \"1\"\n      }, 1, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 17\n      }, this));\n\n      if (startPage > 2) {\n        pages.push( /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn btn-sm btn-disabled\",\n          children: \"...\"\n        }, \"start-ellipsis\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 28\n        }, this));\n      }\n    } // Middle pages\n\n\n    for (let i = startPage; i <= endPage; i++) {\n      pages.push( /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn btn-sm ${currentPage === i ? 'btn-active' : ''}`,\n        onClick: () => handlePageChange(i),\n        children: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 17\n      }, this));\n    } // Last page and ellipsis\n\n\n    if (endPage < totalPages) {\n      if (endPage < totalPages - 1) {\n        pages.push( /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn btn-sm btn-disabled\",\n          children: \"...\"\n        }, \"end-ellipsis\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 28\n        }, this));\n      }\n\n      pages.push( /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn btn-sm ${currentPage === totalPages ? 'btn-active' : ''}`,\n        onClick: () => handlePageChange(totalPages),\n        children: totalPages\n      }, totalPages, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this));\n    } // \"Next\" button\n\n\n    pages.push( /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `btn btn-sm ${currentPage === totalPages ? 'btn-disabled' : ''}`,\n      onClick: () => handlePageChange(currentPage + 1),\n      disabled: currentPage === totalPages,\n      children: \"Next\"\n    }, \"next\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 13\n    }, this));\n    return pages;\n  }; // Create a refresh function that forces a fresh fetch\n\n\n  const refreshProductList = () => {\n    fetchProducts(currentPage, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"p-4 mt-16\",\n    children: [/*#__PURE__*/_jsxDEV(DashboardPageHeading, {\n      name: `Non Pharmacy Products (${totalProducts})`,\n      value: totalProducts,\n      buttons: [/*#__PURE__*/_jsxDEV(NewButton, {\n        modalId: \"create-new-product\"\n      }, \"new-button\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(RefreshButton, {\n        onClick: () => fetchProducts(currentPage)\n      }, \"refresh-button\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(PrintButton, {}, \"print-button\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 21\n      }, this)]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-zebra table-compact\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: ['SN', 'Product Name', 'Category', 'Company', 'Stock', 'Pack Type', 'Pack TP', 'Pack MRP', 'Actions'].map((item, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"text-xs md:text-2xs lg:text-md\",\n            children: item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: nonPharmacyProducts.map((product, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n          tableRowsData: [(currentPage - 1) * productsPerPage + index + 1, product.Product_name || 'N/A', product.Category || 'N/A', product.Company || 'N/A', product.Stock || 'N/A', product.Pack_Type || 'N/A', product.Pack_TP || 'N/A', product.Pack_MRP || 'N/A', /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(EditNonPharmacyButton, {\n              id: product._id,\n              onUpdate: refreshProductList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(DeleteButton, {\n              deleteApiLink: `${API_BASE_URL}/${product._id}`,\n              itemId: product._id,\n              name: product.Product_name,\n              onDelete: refreshProductList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 33\n          }, this)]\n        }, product._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mt-4 gap-2\",\n      children: renderPagination()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(NonPharmacyProducts, \"xegHfJlmBNVIYuuHg1hUd2R0eAg=\");\n\n_c2 = NonPharmacyProducts;\nexport default NonPharmacyProducts;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EditNonPharmacyButton\");\n$RefreshReg$(_c2, \"NonPharmacyProducts\");","map":{"version":3,"names":["React","useState","useEffect","SaveButton","CancelButton","PrintButton","NewButton","Input","Select","DoubleInput","ModalCloseButton","ModalHeading","RefreshButton","TableRow","EditButton","DeleteButton","toast","DashboardPageHeading","AddModal","BiEdit","API_BASE_URL","EditNonPharmacyButton","id","onUpdate","product","setProduct","categories","setCategories","companies","setCompanies","unitTypes","setUnitTypes","modalId","setModalId","fetch","headers","localStorage","getItem","then","res","ok","Error","status","json","data","console","log","catch","error","handleUpdate","event","preventDefault","formData","FormData","target","productDetails","Object","fromEntries","entries","apiData","updates","Product_name","Category","Company","Stock","Pack_Type","Pack_TP","parseFloat","Pack_MRP","method","body","JSON","stringify","response","text","success","document","getElementById","checked","setTimeout","directApiData","purchaseVatPercent","purchaseVatTaka","purchaseDiscountPercent","purchaseDiscountTaka","salesVatPercent","salesVatTaka","salesDiscountPercent","salesDiscountTaka","addedBy","updateEndpoint","updateError","message","map","c","Name","u","NonPharmacyProducts","nonPharmacyProducts","setNonPharmacyProducts","currentPage","setCurrentPage","totalProducts","setTotalProducts","totalPages","setTotalPages","productsPerPage","maxVisiblePages","fetchProducts","page","forceRefresh","cacheBuster","Date","now","url","length","totalItems","addNonPharmacyProduct","addedToDbAt","toISOString","tradeName","reset","handlePageChange","newPage","renderPagination","pages","startPage","Math","max","floor","endPage","min","push","i","refreshProductList","item","index","_id"],"sources":["C:/Users/aweso/OneDrive/Desktop/QuickMeds/frontend/src/pages/Dashboard/Products/NonPharmacyProducts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport SaveButton from '../../../components/buttons/SaveButton';\r\nimport CancelButton from '../../../components/buttons/CancelButton';\r\nimport PrintButton from '../../../components/buttons/PrintButton';\r\nimport NewButton from '../../../components/buttons/NewButton';\r\nimport Input from '../../../components/form/Input';\r\nimport Select from '../../../components/form/Select';\r\nimport DoubleInput from '../../../components/form/DoubleInput';\r\nimport ModalCloseButton from '../../../components/buttons/ModalCloseButton';\r\nimport ModalHeading from '../../../components/headings/ModalHeading';\r\nimport RefreshButton from '../../../components/buttons/RefreshButton';\r\nimport TableRow from '../../../components/TableRow';\r\nimport EditButton from '../../../components/buttons/EditButton';\r\nimport DeleteButton from '../../../components/buttons/DeleteButton';\r\nimport { toast } from 'react-toastify';\r\nimport DashboardPageHeading from '../../../components/headings/DashboardPageHeading';\r\nimport AddModal from '../../../components/modals/AddModal';\r\nimport { BiEdit } from 'react-icons/bi';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000/api/products/nonPharmacy';\r\n\r\n// Custom EditButton component for NonPharmacy products\r\nconst EditNonPharmacyButton = ({ id, onUpdate }) => {\r\n    const [product, setProduct] = useState({});\r\n    const [categories, setCategories] = useState([]);\r\n    const [companies, setCompanies] = useState([]);\r\n    const [unitTypes, setUnitTypes] = useState([]);\r\n    const [modalId, setModalId] = useState(`update-non-pharmacy-product-${id}`);\r\n\r\n    // Update modalId when id changes\r\n    useEffect(() => {\r\n        setModalId(`update-non-pharmacy-product-${id}`);\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        if (!id) return;\r\n        \r\n        fetch(`${API_BASE_URL}/${id}`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            console.log(\"Fetched product data:\", data);\r\n            setProduct(data);\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error fetching product:\", error);\r\n            toast.error(\"Failed to load product data\");\r\n        });\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/api/setup/categories', {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            setCategories(data);\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error fetching categories:\", error);\r\n            toast.error(\"Failed to load categories\");\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/api/setup/companies', {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            setCompanies(data);\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error fetching companies:\", error);\r\n            toast.error(\"Failed to load companies\");\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/api/setup/unitTypes', {\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);\r\n            return res.json();\r\n        })\r\n        .then(data => {\r\n            setUnitTypes(data);\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error fetching unit types:\", error);\r\n            toast.error(\"Failed to load unit types\");\r\n        });\r\n    }, []);\r\n\r\n    const handleUpdate = (event) => {\r\n        event.preventDefault();\r\n        const formData = new FormData(event.target);\r\n        const productDetails = Object.fromEntries(formData.entries());\r\n        \r\n        console.log(\"Updating product with ID:\", id);\r\n        console.log(\"Update data:\", productDetails);\r\n\r\n        // Try a different data format that includes only the fields being updated\r\n        const apiData = {\r\n            updates: {\r\n                Product_name: productDetails.Product_name,\r\n                Category: productDetails.Category,\r\n                Company: productDetails.Company,\r\n                Stock: productDetails.Stock,\r\n                Pack_Type: productDetails.Pack_Type,\r\n                Pack_TP: parseFloat(productDetails.Pack_TP),\r\n                Pack_MRP: parseFloat(productDetails.Pack_MRP)\r\n            }\r\n        };\r\n\r\n        console.log(\"Using updates object format:\", apiData);\r\n\r\n        // Try the standard endpoint with PUT\r\n        fetch(`${API_BASE_URL}/${id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n            },\r\n            body: JSON.stringify(apiData),\r\n        })\r\n        .then(response => {\r\n            console.log(\"PUT response status:\", response.status);\r\n            if (!response.ok) {\r\n                return response.text().then(text => {\r\n                    console.error(\"PUT error response:\", text);\r\n                    throw new Error('Update failed: ' + text);\r\n                });\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log(\"PUT successful, API response:\", data);\r\n            toast.success(`Product updated successfully`);\r\n            document.getElementById(modalId).checked = false;\r\n            \r\n            // Force a refresh of the product list\r\n            if (onUpdate) {\r\n                console.log(\"Triggering product list refresh\");\r\n                setTimeout(() => onUpdate(), 500);\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Error in PUT:', error);\r\n            \r\n            // Try a different data format without the updates wrapper\r\n            const directApiData = {\r\n                Product_name: productDetails.Product_name,\r\n                Category: productDetails.Category,\r\n                Company: productDetails.Company,\r\n                Stock: productDetails.Stock,\r\n                Pack_Type: productDetails.Pack_Type,\r\n                Pack_TP: parseFloat(productDetails.Pack_TP),\r\n                Pack_MRP: parseFloat(productDetails.Pack_MRP),\r\n                // Include these fields from the original data to ensure they're not lost\r\n                purchaseVatPercent: 0,\r\n                purchaseVatTaka: 0,\r\n                purchaseDiscountPercent: 0,\r\n                purchaseDiscountTaka: 0,\r\n                salesVatPercent: 0,\r\n                salesVatTaka: 0,\r\n                salesDiscountPercent: 0,\r\n                salesDiscountTaka: 0,\r\n                addedBy: \"admin\"\r\n            };\r\n            \r\n            console.log(\"Trying direct data format:\", directApiData);\r\n            \r\n            // Try a different endpoint that might be specific to your API\r\n            const updateEndpoint = `http://localhost:5000/api/products/nonPharmacy/update`;\r\n            console.log(\"Trying update endpoint:\", updateEndpoint);\r\n            \r\n            fetch(updateEndpoint, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify({\r\n                    id: id,\r\n                    ...directApiData\r\n                }),\r\n            })\r\n            .then(response => {\r\n                console.log(\"Update endpoint response status:\", response.status);\r\n                if (!response.ok) {\r\n                    return response.text().then(text => {\r\n                        console.error(\"Update endpoint error response:\", text);\r\n                        throw new Error('Update failed: ' + text);\r\n                    });\r\n                }\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                console.log(\"Update endpoint successful, API response:\", data);\r\n                toast.success(`Product updated successfully`);\r\n                document.getElementById(modalId).checked = false;\r\n                if (onUpdate) setTimeout(() => onUpdate(), 500);\r\n            })\r\n            .catch(updateError => {\r\n                console.error('Error in update endpoint:', updateError);\r\n                toast.error('Failed to update product: ' + updateError.message);\r\n            });\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <input type=\"checkbox\" id={modalId} className=\"modal-toggle\" />\r\n            <label htmlFor={modalId} className=\"modal cursor-pointer\">\r\n                <label className=\"modal-box lg:w-7/12 md:w-10/12 w-11/12 max-w-4xl relative\" htmlFor=\"\">\r\n                    <ModalCloseButton modalId={modalId} />\r\n                    <ModalHeading modalHeading={`Update ${product.Product_name || 'Product'}`} />\r\n\r\n                    <form onSubmit={handleUpdate}>\r\n                        <div className='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-1 mb-2'>\r\n                            <Input title={'Product Name'} type='text' value={product.Product_name} name='Product_name' isRequired='required' />\r\n                            <Select title={'Category'} name='Category' isRequired='required' options={categories.map(c => c.Name)} />\r\n                            <Select title={'Company'} name='Company' isRequired='required' options={companies.map(c => c.Name)} />\r\n                            <Input title={'Stock'} type='number' value={product.Stock} name='Stock' isRequired='required' />\r\n                            <Select title={'Pack Type'} name='Pack_Type' isRequired='required' options={unitTypes.map(u => u.Name)} />\r\n                            <Input title={'Pack TP'} type='number' value={product.Pack_TP} name='Pack_TP' isRequired='required' />\r\n                            <Input title={'Pack MRP'} type='number' value={product.Pack_MRP} name='Pack_MRP' isRequired='required' />\r\n                        </div>\r\n                        <div className=\"flex justify-end mt-4\">\r\n                            <SaveButton type=\"submit\" />\r\n                            <CancelButton \r\n                                type=\"button\" \r\n                                onClick={() => document.getElementById(modalId).checked = false} \r\n                                extraClass=\"ml-2\" \r\n                            />\r\n                        </div>\r\n                    </form>\r\n                </label>\r\n            </label>\r\n\r\n            <label htmlFor={modalId} className=\"btn btn-xs btn-ghost\">\r\n                <BiEdit className=\"text-blue-500\" />\r\n            </label>\r\n        </>\r\n    );\r\n};\r\n\r\nconst NonPharmacyProducts = () => {\r\n    const [nonPharmacyProducts, setNonPharmacyProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalProducts, setTotalProducts] = useState(0);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const productsPerPage = 10;\r\n    const maxVisiblePages = 5; // Only show 5 pages at a time\r\n\r\n    // Fetch Non-Pharmacy Products\r\n    const fetchProducts = async (page, forceRefresh = false) => {\r\n        try {\r\n            console.log(`Fetching products for page ${page}${forceRefresh ? ' (forced refresh)' : ''}`);\r\n            \r\n            // Add a cache-busting parameter to force a fresh fetch\r\n            const cacheBuster = forceRefresh ? `&_=${Date.now()}` : '';\r\n            const url = `${API_BASE_URL}?page=${page}&limit=${productsPerPage}${cacheBuster}`;\r\n            console.log(\"Fetch URL:\", url);\r\n            \r\n            const response = await fetch(url);\r\n            \r\n            console.log(\"Fetch response status:\", response.status);\r\n            const data = await response.json();\r\n            \r\n            if (response.ok) {\r\n                console.log(\"Fetched non-pharmacy products:\", data.data);\r\n                \r\n                // Check if the first product matches our expected updated data\r\n                if (data.data && data.data.length > 0) {\r\n                    console.log(\"First product in response:\", data.data[0]);\r\n                }\r\n                \r\n                setNonPharmacyProducts(data.data);\r\n                setTotalProducts(data.totalItems || 0);\r\n                setTotalPages(data.totalPages || 1);\r\n            } else {\r\n                console.error('Unexpected response format:', data);\r\n                setNonPharmacyProducts([]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching non-pharmacy products:', error);\r\n        }\r\n    };\r\n\r\n    // Fetch data when the page changes\r\n    useEffect(() => {\r\n        fetchProducts(currentPage);\r\n    }, [currentPage]);\r\n\r\n    // Add New Product\r\n    const addNonPharmacyProduct = async (event) => {\r\n        event.preventDefault();\r\n        const formData = new FormData(event.target);\r\n        const productDetails = Object.fromEntries(formData.entries());\r\n\r\n        productDetails.addedBy = 'admin';\r\n        productDetails.addedToDbAt = new Date().toISOString();\r\n\r\n        try {\r\n            const response = await fetch(API_BASE_URL, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(productDetails),\r\n            });\r\n\r\n            if (response.ok) {\r\n                toast(<AddModal name={productDetails.tradeName} />);\r\n                fetchProducts(currentPage); // Refresh the product list\r\n            } else {\r\n                console.error('Error adding product:', await response.json());\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n        }\r\n        event.target.reset();\r\n    };\r\n\r\n    // Pagination controls\r\n    const handlePageChange = (newPage) => {\r\n        if (newPage >= 1 && newPage <= totalPages) {\r\n            setCurrentPage(newPage);\r\n        }\r\n    };\r\n\r\n    // Render optimized pagination with ellipsis\r\n    const renderPagination = () => {\r\n        const pages = [];\r\n        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\r\n        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\r\n\r\n        if (endPage - startPage + 1 < maxVisiblePages) {\r\n            startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n        }\r\n\r\n        // \"Previous\" button\r\n        pages.push(\r\n            <button\r\n                key=\"prev\"\r\n                className={`btn btn-sm ${currentPage === 1 ? 'btn-disabled' : ''}`}\r\n                onClick={() => handlePageChange(currentPage - 1)}\r\n                disabled={currentPage === 1}\r\n            >\r\n                Previous\r\n            </button>\r\n        );\r\n\r\n        // First page and ellipsis\r\n        if (startPage > 1) {\r\n            pages.push(\r\n                <button key={1} className={`btn btn-sm ${currentPage === 1 ? 'btn-active' : ''}`} onClick={() => handlePageChange(1)}>\r\n                    1\r\n                </button>\r\n            );\r\n            if (startPage > 2) {\r\n                pages.push(<span key=\"start-ellipsis\" className=\"btn btn-sm btn-disabled\">...</span>);\r\n            }\r\n        }\r\n\r\n        // Middle pages\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            pages.push(\r\n                <button key={i} className={`btn btn-sm ${currentPage === i ? 'btn-active' : ''}`} onClick={() => handlePageChange(i)}>\r\n                    {i}\r\n                </button>\r\n            );\r\n        }\r\n\r\n        // Last page and ellipsis\r\n        if (endPage < totalPages) {\r\n            if (endPage < totalPages - 1) {\r\n                pages.push(<span key=\"end-ellipsis\" className=\"btn btn-sm btn-disabled\">...</span>);\r\n            }\r\n            pages.push(\r\n                <button key={totalPages} className={`btn btn-sm ${currentPage === totalPages ? 'btn-active' : ''}`} onClick={() => handlePageChange(totalPages)}>\r\n                    {totalPages}\r\n                </button>\r\n            );\r\n        }\r\n\r\n        // \"Next\" button\r\n        pages.push(\r\n            <button\r\n                key=\"next\"\r\n                className={`btn btn-sm ${currentPage === totalPages ? 'btn-disabled' : ''}`}\r\n                onClick={() => handlePageChange(currentPage + 1)}\r\n                disabled={currentPage === totalPages}\r\n            >\r\n                Next\r\n            </button>\r\n        );\r\n\r\n        return pages;\r\n    };\r\n\r\n    // Create a refresh function that forces a fresh fetch\r\n    const refreshProductList = () => {\r\n        fetchProducts(currentPage, true);\r\n    };\r\n\r\n    return (\r\n        <section className='p-4 mt-16'>\r\n            <DashboardPageHeading\r\n                name={`Non Pharmacy Products (${totalProducts})`}\r\n                value={totalProducts}\r\n                buttons={[\r\n                    <NewButton key=\"new-button\" modalId='create-new-product' />,\r\n                    <RefreshButton key=\"refresh-button\" onClick={() => fetchProducts(currentPage)} />,\r\n                    <PrintButton key=\"print-button\" />\r\n                ]}\r\n            />\r\n\r\n            {/* Products Table */}\r\n            <table className=\"table table-zebra table-compact\">\r\n                <thead>\r\n                    <tr>\r\n                        {['SN', 'Product Name', 'Category', 'Company', 'Stock', 'Pack Type', 'Pack TP', 'Pack MRP', 'Actions'].map((item, index) => (\r\n                            <th key={index} className='text-xs md:text-2xs lg:text-md'>{item}</th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {nonPharmacyProducts.map((product, index) => (\r\n                        <TableRow\r\n                            key={product._id}\r\n                            tableRowsData={[\r\n                                (currentPage - 1) * productsPerPage + index + 1,\r\n                                product.Product_name || 'N/A',\r\n                                product.Category || 'N/A',\r\n                                product.Company || 'N/A',\r\n                                product.Stock || 'N/A',\r\n                                product.Pack_Type || 'N/A',\r\n                                product.Pack_TP || 'N/A',\r\n                                product.Pack_MRP || 'N/A',\r\n                                <span className='flex items-center gap-x-1'>\r\n                                    <EditNonPharmacyButton \r\n                                        id={product._id} \r\n                                        onUpdate={refreshProductList}\r\n                                    />\r\n                                    <DeleteButton \r\n                                        deleteApiLink={`${API_BASE_URL}/${product._id}`} \r\n                                        itemId={product._id} \r\n                                        name={product.Product_name} \r\n                                        onDelete={refreshProductList}\r\n                                    />\r\n                                </span>\r\n                            ]}\r\n                        />\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination */}\r\n            <div className=\"flex justify-center mt-4 gap-2\">\r\n                {renderPagination()}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default NonPharmacyProducts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}